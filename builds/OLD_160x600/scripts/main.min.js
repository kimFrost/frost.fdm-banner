"use strict";window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}();(function(e,t,n){var r={form:{elem:t.querySelector("form"),inputs:{destinationFrom:{elem:t.querySelector("#destinationFrom"),value:null,require:[],states:{valid:false,disabled:false,changed:true}},destinationTo:{elem:t.querySelector("#destinationTo"),value:null,require:[],states:{valid:false,disabled:false,changed:true}},departureMonth:{elem:t.querySelector("#departureMonth"),value:null,require:[],states:{valid:false,disabled:false,changed:true}},departureDay:{elem:t.querySelector("#departureDay"),value:null,require:["departureMonth"],states:{valid:false,disabled:true,changed:true}},returnMonth:{elem:t.querySelector("#returnMonth"),value:null,require:[],states:{valid:false,disabled:false,changed:true}},returnDay:{elem:t.querySelector("#returnDay"),value:null,require:["returnMonth"],states:{valid:false,disabled:true,changed:true}},countAdults:{elem:t.querySelector("#countAdults"),value:null,require:[],states:{valid:false,disabled:false,changed:true}},countChildren:{elem:t.querySelector("#countChildren"),value:null,require:[],states:{valid:false,disabled:false,changed:true}},childOneAge:{elem:t.querySelector("#childOneAge"),value:null,require:[],states:{valid:false,disabled:true,changed:true}},childTwoAge:{elem:t.querySelector("#childTwoAge"),value:null,require:[],states:{valid:false,disabled:true,changed:true}},childThreeAge:{elem:t.querySelector("#childThreeAge"),value:null,require:[],states:{valid:false,disabled:true,changed:true}},childFourAge:{elem:t.querySelector("#childFourAge"),value:null,require:[],states:{valid:false,disabled:true,changed:true}},childHeadline:{elem:t.querySelector("#childHeadline"),require:[],states:{valid:false,disabled:true,changed:true}},searchButton:{elem:t.querySelector("#searchButton"),value:null,require:["destinationFrom","destinationTo","departureMonth","departureDay","returnMonth","returnDay"],states:{valid:false,disabled:true,changed:true}}}},departureDates:[],departureMonth:[],returnDates:[],returnMonths:[],logCount:0,states:{valid:false}};r.log=function(e,t){try{if(r.logCount>500){console.clear();r.logCount=0}if(e!==n){console.log(e,t)}else{console.log(e)}r.logCount++}catch(i){}};r.daysInMonth=function(e,t){var n=(new Date(t,e+1,0)).getDate();var r=[];for(var i=1;i<=n;i++){r.push(i)}return r};r.generateCalender=function(e,t){var n=[];for(var r=0;r<=t-e;r++){var i=new Date;i.setDate(i.getDate()+r+e);n.push(i)}return n};r.generateDates=function(){var e=r.generateCalender(4,365);var t=r.generateCalender(5,365);var n=["Januar","Februar","Marts","April","Maj","Juni","Juli","August","September","Oktober","November","December"];var i,s,o,u,a,f,l;l=[];for(i=0;i<e.length;i++){s=e[i];o=s.getMonth();u=s.getFullYear();f=false;for(a=0;a<l.length;a++){if(l[a].value===u+" "+o){f=true}}if(!f){l.push({value:u+" "+o,name:n[o],month:o,year:u,dates:[]})}for(a=0;a<l.length;a++){if(l[a].value===u+" "+o){l[a].dates.push(s)}}}r.departureDates=l;l=[];for(i=0;i<t.length;i++){s=t[i];o=s.getMonth();u=s.getFullYear();f=false;for(a=0;a<l.length;a++){if(l[a].value===u+" "+o){f=true}}if(!f){l.push({value:u+" "+o,name:n[o],month:o,year:u,dates:[]})}for(a=0;a<l.length;a++){if(l[a].value===u+" "+o){l[a].dates.push(s)}}}r.returnDates=l;r.updatesMonths()};r.updatesMonths=function(){var e,n,i,s,o,u,a=[];r.form.inputs.departureMonth.elem.options.length=1;a=[];s=1;for(e=0;e<r.departureDates.length;e++){n=r.departureDates[e];if(a.indexOf(n.year)===-1){o=t.createElement("optgroup");o.label=n.year;r.form.inputs.departureMonth.elem.appendChild(o);a.push(n.year)}u=t.createElement("option");u.value=n.value;u.appendChild(t.createTextNode(n.name));o.appendChild(u)}r.form.inputs.returnMonth.elem.options.length=1;a=[];s=1;for(e=0;e<r.returnDates.length;e++){n=r.returnDates[e];if(a.indexOf(n.year)===-1){o=t.createElement("optgroup");o.label=n.year;r.form.inputs.returnMonth.elem.appendChild(o);a.push(n.year)}u=t.createElement("option");u.value=n.value;u.appendChild(t.createTextNode(n.name));o.appendChild(u)}};r.updatesDates=function(e,t){e=e===n?false:e;t=t===n?false:t;var i,s,o,u;if(e){var a=r.form.inputs.departureMonth.value;for(i=0;i<r.departureDates.length;i++){s=r.departureDates[i];if(s.value===a){r.form.inputs.departureDay.elem.options.length=s.dates.length+1;for(o=0;o<s.dates.length;o++){u=s.dates[o];r.form.inputs.departureDay.elem.options[o+1]=new Option(u.getDate(),u,false,false)}break}}}if(t){var f=r.form.inputs.returnMonth.value;for(i=0;i<r.returnDates.length;i++){s=r.returnDates[i];if(s.value===f){r.form.inputs.returnDay.elem.options.length=s.dates.length+1;for(o=0;o<s.dates.length;o++){u=s.dates[o];r.form.inputs.returnDay.elem.options[o+1]=new Option(u.getDate(),u,false,false)}break}}}};r.yyyymmdd=function(e){e=new Date(e);var t=e.getFullYear().toString();var n=(e.getMonth()+1).toString();var r=e.getDate().toString();return t+(n[1]?n:"0"+n[0])+(r[1]?r:"0"+r[0])};r.encodeQueryData=function(e){var t=[];for(var n in e){t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))}return t.join("&")};r.searchSubmit=function(){var t={};t.searchtype=1;t.departurecity=r.form.inputs.destinationFrom.value;t.arriveat=r.form.inputs.destinationTo.value;t.departuredate=r.yyyymmdd(r.form.inputs.departureDay.value);t.returndate=r.yyyymmdd(r.form.inputs.returnDay.value);var n=r.encodeQueryData(t);n=n+"&paxcombination="+r.form.inputs.countAdults.value+"ADT"+","+r.form.inputs.countChildren.value+"CHD";if(r.form.inputs.countChildren.value>0){n=n+"&roomchildage="+function(){var e="";var t;for(t=0;t<parseInt(r.form.inputs.countChildren.value);t++){switch(t){case 0:e=e+r.form.inputs.childOneAge.value+",";break;case 1:e=e+r.form.inputs.childTwoAge.value+",";break;case 2:e=e+r.form.inputs.childThreeAge.value+",";break;case 3:e=e+r.form.inputs.childFourAge.value+",";break}}return e}()}var i="http://rejser.fdm-travel.dk/soeger?"+n;e.open(i,"_blank")};r.valuesChange=function(e){var t=e.target.id;var n=r.form.inputs[t];n.value=e.target.value;n.states.changed=true;r.updateStates()};r.updateModelValues=function(){for(var e in r.form.inputs){s=r.form.inputs[e];s.value=s.elem.value}};r.updateStates=function(e){var t,i;for(t in r.form.inputs){i=r.form.inputs[t];if(i.value!==null&&i.value!==""){i.states.valid=true;i.states.changed=true}else{i.states.valid=false;i.states.changed=true}}for(t in r.form.inputs){i=r.form.inputs[t];if(i.require.length>0){var s=false;for(var o=0;o<i.require.length;o++){var u=i.require[o];var a=r.form.inputs[u];if(a!==n){if(!a.states.valid){s=true;break}}}i.states.disabled=s;i.states.changed=true}}r.updateDOM()};r.updateDOM=function(e){for(var t in r.form.inputs){var n=r.form.inputs[t];if(n.states.changed){if(n.states.disabled&&!n.elem.hasAttribute("disabled")){n.elem.setAttribute("disabled","disabled");n.elem.parentNode.setAttribute("disabled","disabled")}else if(!n.states.disabled&&n.elem.hasAttribute("disabled")){n.elem.removeAttribute("disabled");n.elem.parentNode.removeAttribute("disabled")}if(n.states.valid){}else{}n.states.changed=false}}};r.form.inputs.countChildren.elem.addEventListener("change",function(e){var t=e.target.value;t=parseInt(t);switch(t){case 0:r.form.inputs.childOneAge.states.disabled=true;r.form.inputs.childTwoAge.states.disabled=true;r.form.inputs.childThreeAge.states.disabled=true;r.form.inputs.childFourAge.states.disabled=true;r.form.inputs.childHeadline.states.disabled=true;r.form.inputs.searchButton.require=["destinationFrom","destinationTo","departureMonth","departureDay","returnMonth","returnDay"];break;case 1:r.form.inputs.childOneAge.states.disabled=false;r.form.inputs.childTwoAge.states.disabled=true;r.form.inputs.childThreeAge.states.disabled=true;r.form.inputs.childFourAge.states.disabled=true;r.form.inputs.childHeadline.states.disabled=false;r.form.inputs.searchButton.require=["destinationFrom","destinationTo","departureMonth","departureDay","returnMonth","returnDay","childOneAge"];break;case 2:r.form.inputs.childOneAge.states.disabled=false;r.form.inputs.childTwoAge.states.disabled=false;r.form.inputs.childThreeAge.states.disabled=true;r.form.inputs.childFourAge.states.disabled=true;r.form.inputs.childHeadline.states.disabled=false;r.form.inputs.searchButton.require=["destinationFrom","destinationTo","departureMonth","departureDay","returnMonth","returnDay","childOneAge","childTwoAge"];break;case 3:r.form.inputs.childOneAge.states.disabled=false;r.form.inputs.childTwoAge.states.disabled=false;r.form.inputs.childThreeAge.states.disabled=false;r.form.inputs.childFourAge.states.disabled=true;r.form.inputs.childHeadline.states.disabled=false;r.form.inputs.searchButton.require=["destinationFrom","destinationTo","departureMonth","departureDay","returnMonth","returnDay","childOneAge","childTwoAge","childThreeAge"];break;case 4:r.form.inputs.childOneAge.states.disabled=false;r.form.inputs.childTwoAge.states.disabled=false;r.form.inputs.childThreeAge.states.disabled=false;r.form.inputs.childFourAge.states.disabled=false;r.form.inputs.childHeadline.states.disabled=false;r.form.inputs.searchButton.require=["destinationFrom","destinationTo","departureMonth","departureDay","returnMonth","returnDay","childOneAge","childTwoAge","childThreeAge","childFourAge"];break}r.updateStates()},false);for(var i in r.form.inputs){var s=r.form.inputs[i];s.elem.addEventListener("change",r.valuesChange,false)}r.form.inputs.departureMonth.elem.addEventListener("change",function(e){r.updatesDates(true,false)});r.form.inputs.returnMonth.elem.addEventListener("change",function(e){r.updatesDates(false,true)});r.form.inputs.searchButton.elem.addEventListener("click",function(e){if(!r.form.inputs.searchButton.states.disabled){r.searchSubmit()}});r.generateDates();r.updateModelValues();r.updateStates()})(window,window.document)